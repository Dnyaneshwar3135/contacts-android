
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Android Contacts API Library for Kotlin and Java.">
      
      
        <meta name="author" content="Vandolf Estrellado">
      
      
        <link rel="canonical" href="https://vestrel00.github.io/contacts-android/entities/about-contact-lookup-key/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.3">
    
    
      
        <title>Contact lookup key vs ID - Contacts, Reborn</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contact-lookup-key-vs-id" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Contacts, Reborn" class="md-header__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16V0M4 24h16v-2H4v2M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Contacts, Reborn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contact lookup key vs ID
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Contacts, Reborn" class="md-nav__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16V0M4 24h16v-2H4v2M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17Z"/></svg>

    </a>
    Contacts, Reborn
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        Cheatsheet
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/setup-contacts-api/" class="md-nav__link">
        Contacts API Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Entities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Entities" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Entities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../about-api-entities/" class="md-nav__link">
        API entities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../about-blank-contacts/" class="md-nav__link">
        Blank contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../about-blank-data/" class="md-nav__link">
        Blank data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../include-only-desired-data/" class="md-nav__link">
        Include only certain fields for read and write operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../about-local-contacts/" class="md-nav__link">
        Local (device-only) contacts
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Contact lookup key vs ID
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Contact lookup key vs ID
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-contact-lookup-key-vs-contact-id" class="md-nav__link">
    When to use Contact lookup key vs Contact ID?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-the-contact-lookup-key" class="md-nav__link">
    How to get the Contact lookup key?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-contacts-using-lookup-keys" class="md-nav__link">
    How to get Contacts using lookup keys?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-rawcontacts-between-accounts-and-the-lookup-key" class="md-nav__link">
    Moving RawContacts between accounts and the lookup key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkingunlinking-contacts-and-the-lookup-key" class="md-nav__link">
    Linking/unlinking contacts and the lookup key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    Developer notes (or for advanced users)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sync-contact-data/" class="md-nav__link">
        Sync contact data across devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redact-apis-and-entities/" class="md-nav__link">
        Redact entities and API input and output in production
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts/" class="md-nav__link">
        Query contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts-advanced/" class="md-nav__link">
        Query contacts (advanced)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/insert-contacts/" class="md-nav__link">
        Insert contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/update-contacts/" class="md-nav__link">
        Update contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/delete-contacts/" class="md-nav__link">
        Delete contacts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/query-data-sets/" class="md-nav__link">
        Query specific data kinds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/insert-data-sets/" class="md-nav__link">
        Insert data into new or existing contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/update-data-sets/" class="md-nav__link">
        Update existing sets of data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/delete-data-sets/" class="md-nav__link">
        Delete existing sets of data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Custom data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Custom data" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Custom data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/query-custom-data/" class="md-nav__link">
        Query custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/insert-custom-data/" class="md-nav__link">
        Insert custom data into new or existing contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/update-custom-data/" class="md-nav__link">
        Update custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/delete-custom-data/" class="md-nav__link">
        Delete custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data/" class="md-nav__link">
        Integrate custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data-from-other-apps/" class="md-nav__link">
        Integrate custom data from other apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-googlecontacts-custom-data/" class="md-nav__link">
        Integrate the Google Contacts custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-gender-custom-data/" class="md-nav__link">
        Integrate the Gender custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-handlename-custom-data/" class="md-nav__link">
        Integrate the Handle Name custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-pokemon-custom-data/" class="md-nav__link">
        Integrate the Pokemon custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-rpg-custom-data/" class="md-nav__link">
        Integrate the RPG custom data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Groups
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Groups" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Groups
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/query-groups/" class="md-nav__link">
        Query groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/insert-groups/" class="md-nav__link">
        Insert groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/update-groups/" class="md-nav__link">
        Update groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/delete-groups/" class="md-nav__link">
        Delete groups
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Profile
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Profile" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Profile
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/query-profile/" class="md-nav__link">
        Query device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/insert-profile/" class="md-nav__link">
        Insert device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/update-profile/" class="md-nav__link">
        Update device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/delete-profile/" class="md-nav__link">
        Delete device owner Contact profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Accounts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Accounts" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Accounts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-accounts/" class="md-nav__link">
        Query for Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-raw-contacts/" class="md-nav__link">
        Query RawContacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/associate-device-local-raw-contacts-to-an-account/" class="md-nav__link">
        Associate a local RawContact to an Account
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          SIM card
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SIM card" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          SIM card
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/about-sim-contacts/" class="md-nav__link">
        About SIM contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/query-sim-contacts/" class="md-nav__link">
        Query contacts in SIM card
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/insert-sim-contacts/" class="md-nav__link">
        Insert contacts into SIM card
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/update-sim-contacts/" class="md-nav__link">
        Update contacts in SIM card
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/delete-sim-contacts/" class="md-nav__link">
        Delete contacts from SIM card
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Blocked numbers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Blocked numbers" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Blocked numbers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/about-blocked-numbers/" class="md-nav__link">
        About blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/query-blocked-numbers/" class="md-nav__link">
        Query blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/insert-blocked-numbers/" class="md-nav__link">
        Insert blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/delete-blocked-numbers/" class="md-nav__link">
        Delete blocked numbers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Permissions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Permissions" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Permissions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../permissions/permissions-handling-coroutines/" class="md-nav__link">
        Permissions handling using coroutines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          Asynchronous work
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Asynchronous work" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Asynchronous work
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../async/async-execution-coroutines/" class="md-nav__link">
        Execute work outside of the UI thread using coroutines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          UI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="UI" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          UI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/integrate-rudimentary-contacts-integrated-ui-components/" class="md-nav__link">
        Integrate rudimentary contacts ui components
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-remove-contact-raw-contact-photo/" class="md-nav__link">
        Get set remove full-sized and thumbnail contact photos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-contact-raw-contact-options/" class="md-nav__link">
        Get set contact options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-default-data/" class="md-nav__link">
        Get set clear default Contact data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/link-unlink-contacts/" class="md-nav__link">
        Link unlink Contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/share-contacts-vcard/" class="md-nav__link">
        Share Contacts vCard (.VCF)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/convenience-functions/" class="md-nav__link">
        Convenience functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          Logging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Logging" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Logging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logging/log-api-input-output/" class="md-nav__link">
        Log API input and output
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/test-contacts-api/" class="md-nav__link">
        Contacts API Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_19" type="checkbox" id="__nav_19" >
      
      
      
      
        <label class="md-nav__link" for="__nav_19">
          Debug
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Debug" data-md-level="1">
        <label class="md-nav__title" for="__nav_19">
          <span class="md-nav__icon md-icon"></span>
          Debug
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-contacts-provider-tables/" class="md-nav__link">
        Debug the Contacts Provider tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-blockednumber-provider-tables/" class="md-nav__link">
        Debug the BlockedNumber Provider tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-sim-contacts-tables/" class="md-nav__link">
        Debug the Sim Contacts table
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dev-notes/" class="md-nav__link">
        Developer notes
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-contact-lookup-key-vs-contact-id" class="md-nav__link">
    When to use Contact lookup key vs Contact ID?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-the-contact-lookup-key" class="md-nav__link">
    How to get the Contact lookup key?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-contacts-using-lookup-keys" class="md-nav__link">
    How to get Contacts using lookup keys?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-rawcontacts-between-accounts-and-the-lookup-key" class="md-nav__link">
    Moving RawContacts between accounts and the lookup key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkingunlinking-contacts-and-the-lookup-key" class="md-nav__link">
    Linking/unlinking contacts and the lookup key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    Developer notes (or for advanced users)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/vestrel00/contacts-android/tree/main/docs/entities/about-contact-lookup-key.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="contact-lookup-key-vs-id">Contact lookup key vs ID<a class="headerlink" href="#contact-lookup-key-vs-id" title="Permanent link">&para;</a></h1>
<p>The <em>Contact ID</em> is a number in the Contacts table that serves as the <em>unique identifier for a row
in the <strong>local</strong> Contacts table</em>. These look like any number used as an ID in a database table. For
example; <code>4</code>, <code>8</code>, <code>15</code>, <code>16</code>, <code>23</code>, <code>42</code>, ...</p>
<p>The <em>Contact lookup key</em> is a string that serves as the <em>unique identifier for an aggregate contact 
in the <strong>local and remote</strong> databases</em>. These look like randomly generated or hashed strings. 
For example; <code>2059i4a27289d88a0a4e7</code>, <code>0r62-2A2C2E</code>, ...</p>
<p>The official documentation for the Contact lookup key is,</p>
<blockquote>
<p>ℹ️ An opaque value that contains hints on how to find the contact if its row id changed as a result
of a sync or aggregation.</p>
</blockquote>
<p>Let's dissect the documentation,</p>
<ul>
<li>"if its row id changed".<ul>
<li>This means that a Person's row ID can change!</li>
</ul>
</li>
<li>"as a result of a sync".<ul>
<li>The Contacts Provider allows sync adapters to modify the local and remote Contacts databases
  to ensure that Contact data is synced per user account.</li>
</ul>
</li>
<li>"as a result of...aggregation".<ul>
<li>Two or more Contacts (along with their constituent RawContacts) can be linked into a single
  Contact. When this happens, those Contacts will be consolidated into a single (existing)
  Contact row. Unlinking will result in the original Contacts prior to linking to have different
  IDs in the Contacts table because the previously deleted row IDs cannot be reused.</li>
</ul>
</li>
</ul>
<p>Unlike the Contact ID, the lookup key is the same across devices (for contacts that are associated
with an Account and are synced). The lookup key points to a person entity rather than just a row 
in a table. It is the unique identifier used by local and remote sync adapters to identify an 
aggregate contact.</p>
<blockquote>
<p>ℹ️ Actually, it seems like the Contact lookup key is a reference to a RawContact (or all of its
constituent RawContacts). RawContacts have a reference to the parent Contact via the Contact ID. 
Similarly, the parent Contact has a reference to all of its constituent RawContacts via the 
lookup key.</p>
</blockquote>
<p>Note that RawContacts do not have a lookup key. It is exclusive to Contacts.</p>
<h2 id="when-to-use-contact-lookup-key-vs-contact-id">When to use Contact lookup key vs Contact ID?<a class="headerlink" href="#when-to-use-contact-lookup-key-vs-contact-id" title="Permanent link">&para;</a></h2>
<p>Use the <strong>Contact lookup key</strong> when you need to save a reference to a Contact that you want to 
fetch after some period of time.</p>
<ul>
<li>Saving/restoring activity/fragment instance state.</li>
<li>Saving to an external database, preferences, or files.</li>
<li>Creating shortcuts.</li>
</ul>
<p>Use the <strong>Contact ID</strong> for everything else.</p>
<ul>
<li>Performing read/write operations in the same function call or session in your app.</li>
<li>Performing read/write operations that require ID (e.g. Contact photo and options).</li>
</ul>
<h2 id="how-to-get-the-contact-lookup-key">How to get the Contact lookup key?<a class="headerlink" href="#how-to-get-the-contact-lookup-key" title="Permanent link">&para;</a></h2>
<p>Lookup keys are included in queries by default but are not required. This means that if you use do
not invoke the <code>include</code> function in query APIs, then it will be included in the returned Contacts.
However, if you do specify fields to include by invoking the <code>include</code> function, then you must 
explicitly specify the lookup key,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">.</span><span class="na">include</span><span class="p">(</span><span class="n">Fields</span><span class="p">.</span><span class="na">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p><code>Contact</code>s instances returned by the query will contain a value in the <code>Contact.lookupKey</code> property.</p>
<p>For more info, read <a href="../include-only-desired-data/">Include only certain fields for read and write operations</a>.</p>
<h2 id="how-to-get-contacts-using-lookup-keys">How to get Contacts using lookup keys?<a class="headerlink" href="#how-to-get-contacts-using-lookup-keys" title="Permanent link">&para;</a></h2>
<p>Use the <code>decomposedLookupKeys</code> functions in <code>contacts.core.util.ContactLookupKey.kt</code> to get contacts 
by lookup key,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">decomposedLookupKeys</span><span class="p">(</span><span class="n">lookupKeys</span><span class="p">)</span><span class="w"> </span><span class="n">whereOr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}.</span><span class="na">find</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>Or use the <code>lookupKeyIn</code> extensions in <code>contacts.core.util.ContactLookupKey.kt</code> to get contacts
by lookup key,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">lookupKeyIn</span><span class="p">(</span><span class="n">lookupKeys</span><span class="p">)</span><span class="w"> </span><span class="p">}.</span><span class="na">find</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>For an explanation on why you should use those functions instead of the lookup key directly,
read the function documentation.</p>
<p>Note that if the lookup key is a reference to a linked Contact (a Contact with two or more
constituent RawContacts), and the linked Contact is unlinked, then the query will return
multiple Contacts.</p>
<blockquote>
<p>ℹ️ For more info, read <a href="../../basics/query-contacts-advanced/">Query contacts (advanced)</a>.</p>
</blockquote>
<h2 id="moving-rawcontacts-between-accounts-and-the-lookup-key">Moving RawContacts between accounts and the lookup key<a class="headerlink" href="#moving-rawcontacts-between-accounts-and-the-lookup-key" title="Permanent link">&para;</a></h2>
<p>Associating a local (device-only) RawContact to an Account will change the Contact lookup key. In 
general, set a RawContact's Account to something else will change the lookup key. In these cases,
the changes to the lookup key will only be applied after the Contacts Provider and sync adapters
sync the changes. This means that the local changes are not immediately applied.</p>
<blockquote>
<p>ℹ️ For more info, read <a href="../sync-contact-data/">Sync contact data across devices</a>.</p>
</blockquote>
<p>Changing a RawContact's Account will result in a failed lookup using lookup keys prior to the 
Account change.</p>
<p>For example, using the default AOSP Contacts app or the Google Contacts app...</p>
<ol>
<li>View a contact's details.</li>
<li>Create a shortcut to it in the home screen (launcher).</li>
<li>This shortcut uses the Contact lookup key (not the ID) to form a lookup URI.</li>
<li>Change the RawContact's Account.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
</ol>
<p>Both Contacts apps will say that the Contact no longer exist or has been removed. This is not a bug.
It is expected behavior due to the way the Contacts Provider works.</p>
<blockquote>
<p>ℹ️ For more info, read <a href="../../accounts/associate-device-local-raw-contacts-to-an-account/">Associate local RawContacts to an Account</a>.</p>
</blockquote>
<h2 id="linkingunlinking-contacts-and-the-lookup-key">Linking/unlinking contacts and the lookup key<a class="headerlink" href="#linkingunlinking-contacts-and-the-lookup-key" title="Permanent link">&para;</a></h2>
<p>Linking and unlinking RawContacts will change the value of the lookup key. However, as discussed
in prior sections, you are still able to use the lookup key to find the aggregate Contact even
though the Contact ID has changed.</p>
<p>Linking/unlinking contacts will result in a successful lookup using lookup keys prior to the
Account change.</p>
<p>For example, using the default AOSP Contacts app or the Google Contacts app...</p>
<ol>
<li>View a contact's details.</li>
<li>Create a shortcut to it in the home screen (launcher).<ul>
<li>This shortcut uses the Contact lookup key (not the ID) to form a lookup URI.</li>
</ul>
</li>
<li>Link the contact to another contact.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
<li>Unlink the contact.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
</ol>
<p>In both cases, the shortcut successfully opens the correct aggregate Contact.</p>
<blockquote>
<p>ℹ️ For more info on linking/unlinking, read <a href="../../other/link-unlink-contacts/">Link unlink Contacts</a>.</p>
</blockquote>
<hr />
<h2 id="developer-notes-or-for-advanced-users">Developer notes (or for advanced users)<a class="headerlink" href="#developer-notes-or-for-advanced-users" title="Permanent link">&para;</a></h2>
<blockquote>
<p>ℹ️ The following section are note from developers of this library for other developers. It is copied
from the <a href="../../dev-notes/">DEV_NOTES</a>. You may still read the following as a consumer of the library
in case you need deeper insight.</p>
</blockquote>
<p>The <code>Contacts._ID</code> is the unique identifier for the row in the Contacts table. The
<code>Contacts.LOOKUP_KEY</code> is the unique identifier for an aggregate Contact (a person). The <code>_ID</code> may
change due to aggregation and sync. The same goes for the <code>LOOKUP_KEY</code> but unlike the <code>ID</code> it may 
still be used to find the aggregate contact.</p>
<p>Unlike the Contact ID, the lookup key is the same across devices (for contacts that are associated 
with an Account and are synced).</p>
<blockquote>
<p>ℹ️ The following investigation was done with a much larger data set. I has been simplified here 
for brevity.</p>
</blockquote>
<p>Let's take a look at the following Contacts and RawContacts table rows,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>#### Contacts table
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Contact id: 55, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50, displayNamePrimary: Contact With Local RawContact
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>Contact id: 56, lookupKey: 2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>#### RawContacts table
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>RawContact id: 55, contactId: 55, displayNamePrimary: Contact With Local RawContact
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>RawContact id: 56, contactId: 56, displayNamePrimary: Contact With Synced RawContact
</code></pre></div>
<p>There are two Contacts each having one RawContact.</p>
<p>Notice that the lookup keys are a bit different.</p>
<ul>
<li>Contact With Local RawContact: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</li>
<li>Contact With Synced RawContact: 2059i6f5de8460f7f227e</li>
</ul>
<p>The Contact with unsynced, device-only, local RawContact has a much longer (or shorter e.g. 0r62-2A2C2E)
lookup key and starts with "0r<RawContact ID>-" and all characters after it are in uppercase. The
other thing to notice is that the "55" in "0r55-" seems to be the same as the RawContact ID (I did
a bit more experiments than what is written in these notes to confirm that it is indeed the
RawContact ID and not the Contact ID). We probably don't need to worry about these details though
the Contacts Provider probably uses these things internally. We also should not rely on it.</p>
<p>However, it may be safe to assume that the <strong>Contact lookup key is a reference to a RawContact</strong>
(or reference to more than one constituent RawContact when multiple RawContacts are linked). Again,
an internal Contacts Provider detail we should not rely on BUT is probably relevant when implementing
sync adapters.</p>
<p><strong>When we link</strong> the two, we get...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Contact id: 55, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50.2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>#### RawContacts table
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>RawContact id: 55, contactId: 55, displayNamePrimary: Contact With Local RawContact
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>RawContact id: 56, contactId: 55, displayNamePrimary: Contact With Synced RawContact
</code></pre></div>
<p>Notice,</p>
<ul>
<li>Contact with ID 56 has been deleted.</li>
<li>Contact with ID 55 still exist with the <strong>lookup keys</strong> of both Contact 55 and 56 <strong>combined separated by a "."</strong>.<ul>
<li>This holds true in cases where two or more local-only or non-local-only RawContacts are linked.</li>
</ul>
</li>
<li>RawContacts remain unchanged except reference to Contact 56 has been replaced with 55.</li>
<li>The primary display name of Contact 55 came from RawContact 55 prior to the link and now comes
  from RawContact 56 after the link.<ul>
<li>This primary name resolution is probably irrelevant so pay no attention to it.</li>
</ul>
</li>
</ul>
<p>The most important part to notice is that the lookup keys get combined.</p>
<p>The lookup uri is required to build a <code>Contacts.CONTENT_LOOKUP_URI</code>...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/**</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="cm"> * A content:// style URI for this table that should be used to create</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="cm"> * shortcuts or otherwise create long-term links to contacts. This URI</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="cm"> * should always be followed by a &quot;/&quot; and the contact&#39;s {@link #LOOKUP_KEY}.</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cm"> * It can optionally also have a &quot;/&quot; and last known contact ID appended after</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="cm"> * that. This &quot;complete&quot; format is an important optimization and is highly recommended.</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="cm"> * &lt;p&gt;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="cm"> * As long as the contact&#39;s row ID remains the same, this URI is</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="cm"> * equivalent to {@link #CONTENT_URI}. If the contact&#39;s row ID changes</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="cm"> * as a result of a sync or aggregation, this URI will look up the</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="cm"> * contact using indirect information (sync IDs or constituent raw</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="cm"> * contacts).</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="cm"> * &lt;p&gt;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="cm"> * Lookup key should be appended unencoded - it is stored in the encoded</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="cm"> * form, ready for use in a URI.</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="cm"> */</span><span class="w"></span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">CONTENT_LOOKUP_URI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">withAppendedPath</span><span class="p">(</span><span class="n">CONTENT_URI</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lookup&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="cm">/**</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="cm"> * Build a {@link #CONTENT_LOOKUP_URI} lookup {@link Uri} using the</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="cm"> * given {@link ContactsContract.Contacts#_ID} and {@link #LOOKUP_KEY}.</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="cm"> * &lt;p&gt;</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="cm"> * Returns null if unable to construct a valid lookup URI from the</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="cm"> * provided parameters.</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="cm"> */</span><span class="w"></span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="nf">getLookupUri</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">contactId</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lookupKey</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">TextUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">lookupKey</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ContentUris</span><span class="p">.</span><span class="na">withAppendedId</span><span class="p">(</span><span class="n">Uri</span><span class="p">.</span><span class="na">withAppendedPath</span><span class="p">(</span><span class="n">Contacts</span><span class="p">.</span><span class="na">CONTENT_LOOKUP_URI</span><span class="p">,</span><span class="w"> </span><span class="n">lookupKey</span><span class="p">),</span><span class="w"> </span><span class="n">contactId</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>From the lookup uri, we can lookup the Contact row...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="nf">lookupContact</span><span class="p">(</span><span class="n">ContentResolver</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">lookupUri</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Or simply get the Contact ID...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">// code inside `public static Uri lookupContact`</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">resolver</span><span class="p">.</span><span class="na">query</span><span class="p">(</span><span class="n">lookupUri</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="p">{</span><span class="n">Contacts</span><span class="p">.</span><span class="na">_ID</span><span class="p">},</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>However, given that the lookup key of the deleted Contact 56 still lives on, it is possible to get
the linked Contact 55 using the lookup key of Contact 56 using our standard query APIs!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">lookupKey</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The above is correct as long as these assumptions hold true;</p>
<ul>
<li>the lookup key is unique</li>
<li>there is no lookup key that can contain a shorter lookup key<ul>
<li>the Contact ID fails this test because a smaller number is contained in a larger number</li>
<li>synced contacts have shorter lookup keys than local contacts. However, local contacts'
  lookup keys are capitalized whereas synced contact are not. Also, there seems to be other
  differences in pattern between long and short lookup keys. It should be safe to make this
  assumption.</li>
</ul>
</li>
</ul>
<p>Until the community finds that this assumption is flawed, we'll assume that it is true! For now, we
can <strong>avoid having to create another API or extensions just for using lookup keys</strong>.</p>
<p><strong>When we unlink</strong>, we get...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>#### Contacts table
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Contact id: 55, lookupKey: 2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Contact id: 58, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50, displayNamePrimary: Contact With Local RawContact
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>#### RawContacts table
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>RawContact id: 55, contactId: 58, displayNamePrimary: Contact With Local RawContact
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>RawContact id: 56, contactId: 55, displayNamePrimary: Contact With Synced RawContact
</code></pre></div>
<p>Notice,</p>
<ul>
<li>A new Contact row with ID of 58 is created.</li>
<li>The lookup keys are separated and distributed between Contact 55 and 58.</li>
<li>RawContact 55 Contact reference has been set to Contact 58.</li>
</ul>
<p>Let's compare the Contact-RawContact relationship before and after linking and then unlinking.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>Contact ID</strong></th>
<th><strong>Lookup Key</strong></th>
<th><strong>RawContact.Contact ID</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Before</strong></td>
<td>55,<br>56</td>
<td>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50,<br>2059i6f5de8460f7f227e</td>
<td>55,<br>56</td>
</tr>
<tr>
<td><strong>After</strong></td>
<td>55,<br>58</td>
<td>2059i6f5de8460f7f227e,<br>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</td>
<td>58,<br>55</td>
</tr>
</tbody>
</table>
<p>Notice,</p>
<ul>
<li>Contact ID 55 swapped lookup keys with the former Contact 56 (now 58).</li>
<li>RawContact ID 55 swapped Contact reference with RawContact 56.</li>
</ul>
<p>The Contact IDs and lookup keys got shuffled BUT the Contact-RawContact relationship remains the
same if using the lookup keys as point of reference! Here is another way to look at the table,
using the lookup key as the constant...</p>
<table>
<thead>
<tr>
<th><strong>Lookup Key</strong></th>
<th><strong>Before</strong></th>
<th><strong>After</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</td>
<td>Contact 55,<br>RawContact 55</td>
<td>Contact 58,<br>RawContact 55</td>
</tr>
<tr>
<td>2059i6f5de8460f7f227e</td>
<td>Contact 56,<br>RawContact 56</td>
<td>Contact 55,<br>RawContact 56</td>
</tr>
</tbody>
</table>
<p>Notice that the indirect relationship between the lookup key and RawContacts remains the same
before and after the link-unlink even though the Contact IDs changed.</p>
<blockquote>
<p>ℹ️ As mentioned earlier in this section, the "55" in "0r55-" seems to be referencing the 
RawContact ID. In other words, since local RawContacts are not synced or tracked in a remote 
database where Contacts -&gt; RawContacts mappings exist, the Contacts Provider most likely uses this
"0r<RawContact ID>-" pattern to make the connection. This is not really relevant for us as we are
not relying on this mechanism. I'm just pointing out my observations, which could be incorrect.</p>
</blockquote>
<p>This means that...</p>
<ul>
<li>If users of this library saved a reference Contact ID 55, then a link-unlink (or sync adapter
  functions) occur.<ul>
<li>Getting Contact by ID 55 will result in the RawContact-Data of the former Contact 56 to be
  returned. This is a bug! Same goes if users saved a reference to Contact ID 56.</li>
</ul>
</li>
<li>If users of this library saved a reference to the lookup keys, then a link-unlink (or sync adapter
  functions) occur.<ul>
<li>Getting Contact by lookup key will result in the correct RawContact-Data to be returned.</li>
</ul>
</li>
</ul>
<p>So when to use Contact ID vs lookup key?</p>
<ul>
<li>Lookup key: for a reference to a Contact that needs to be loaded after some period of time.<ul>
<li>Saving/restoring activity/fragment instance state.</li>
<li>Saving to an external database, preferences, or files.</li>
<li>Creating shortcuts.</li>
</ul>
</li>
<li>ID: for everything else.<ul>
<li>Performing read/write operations in the same function call or session in your app.</li>
<li>Performing read/write operations that require ID (e.g. Contact photo and options).</li>
</ul>
</li>
</ul>
<p>Another thing to check is what happens when associating a local RawContact to an Account (move from
device to Account) and vice versa. Is the lookup key of the Contact affected?</p>
<p>After associating the local RawContact to an Account...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>#### Contacts table
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Contact id: 58, lookupKey: 2059i4abd4a8f8ff89642
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>#### RawContacts table
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>RawContact id: 55, contactId: 58
</code></pre></div>
<p>The lookup key changed but the Contact ID remained the same! In this case, loading a reference to
the previously local Contact will fail! I verified that this is indeed the behavior of the native
(AOSP) Contacts app. Moving the RawContact from device to Google using Google Contacts app while
having Contact details activity opened in the AOSP Contacts app will result in "error Contact does
not exist" message in the AOSP Contacts app!</p>
<blockquote>
<p>ℹ️ The RawContact and its Data also remained the same in this case.</p>
</blockquote>
<p>Removing the account from it results in...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>#### Contacts table
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Contact id: 59, lookupKey: 0r58-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>#### RawContacts table
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>RawContact id: 58, contactId: 59
</code></pre></div>
<p>The Contact and RawContacts row have been deleted and new rows have been created to replace them!
I also verified that the Data rows have also been deleted and new rows have been created to
replace them!</p>
<p>This stuff is not really relevant for lookup key but still good to know for implementing
moving between accounts in the future.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../about-local-contacts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Local (device-only) contacts" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Local (device-only) contacts
            </div>
          </div>
        </a>
      
      
        
        <a href="../sync-contact-data/" class="md-footer__link md-footer__link--next" aria-label="Next: Sync contact data across devices" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Sync contact data across devices
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f758a944.min.js"></script>
      
    
  </body>
</html>