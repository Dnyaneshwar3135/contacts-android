
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Android Contacts API Library for Kotlin and Java.">
      
      
        <meta name="author" content="Vandolf Estrellado">
      
      
        <link rel="canonical" href="https://vestrel00.github.io/contacts-android/basics/query-contacts-advanced/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.4">
    
    
      
        <title>Query contacts (advanced) - Contacts, Reborn</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#query-contacts-advanced" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Contacts, Reborn" class="md-header__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16V0M4 24h16v-2H4v2M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Contacts, Reborn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Query contacts (advanced)
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vestrel00/contacts-android/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Contacts, Reborn" class="md-nav__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16V0M4 24h16v-2H4v2M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"/></svg>

    </a>
    Contacts, Reborn
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vestrel00/contacts-android/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/setup-contacts-api/" class="md-nav__link">
        Contacts API Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Entities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Entities" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Entities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-api-entities/" class="md-nav__link">
        API entities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-blank-contacts/" class="md-nav__link">
        Blank contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-blank-data/" class="md-nav__link">
        Blank data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/include-only-desired-data/" class="md-nav__link">
        Include only certain fields for read and write operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-local-contacts/" class="md-nav__link">
        Local (device-only) contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-contact-lookup-key/" class="md-nav__link">
        Contact lookup key vs ID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/sync-contact-data/" class="md-nav__link">
        Sync contact data across devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/redact-apis-and-entities/" class="md-nav__link">
        Redact entities and API input and output in production
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../query-contacts/" class="md-nav__link">
        Query contacts
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Query contacts (advanced)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Query contacts (advanced)
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#an-advanced-query" class="md-nav__link">
    An advanced query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-query" class="md-nav__link">
    A basic query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-blank-contacts" class="md-nav__link">
    Including blank contacts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-accounts" class="md-nav__link">
    Specifying Accounts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-only-specific-data" class="md-nav__link">
    Including only specific data
  </a>
  
    <nav class="md-nav" aria-label="Including only specific data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-groups" class="md-nav__link">
    Specifying Groups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limiting-and-offsetting" class="md-nav__link">
    Limiting and offsetting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executing-the-query" class="md-nav__link">
    Executing the query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-the-query" class="md-nav__link">
    Cancelling the query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-asynchronously" class="md-nav__link">
    Performing the query asynchronously
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-with-permission" class="md-nav__link">
    Performing the query with permission
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-data-support" class="md-nav__link">
    Custom data support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-where-function-to-specify-matching-criteria" class="md-nav__link">
    Using the where function to specify matching criteria
  </a>
  
    <nav class="md-nav" aria-label="Using the where function to specify matching criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    Performance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blank-contacts-and-the-where-function" class="md-nav__link">
    Blank Contacts and the where function
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../insert-contacts/" class="md-nav__link">
        Insert contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../update-contacts/" class="md-nav__link">
        Update contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../delete-contacts/" class="md-nav__link">
        Delete contacts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/query-data-sets/" class="md-nav__link">
        Query specific data kinds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/insert-data-sets/" class="md-nav__link">
        Insert data into new or existing contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/update-data-sets/" class="md-nav__link">
        Update existing sets of data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/delete-data-sets/" class="md-nav__link">
        Delete existing sets of data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Custom data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Custom data" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Custom data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/query-custom-data/" class="md-nav__link">
        Query custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/insert-custom-data/" class="md-nav__link">
        Insert custom data into new or existing contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/update-custom-data/" class="md-nav__link">
        Update custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/delete-custom-data/" class="md-nav__link">
        Delete custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data/" class="md-nav__link">
        Integrate custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data-from-other-apps/" class="md-nav__link">
        Integrate custom data from other apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-googlecontacts-custom-data/" class="md-nav__link">
        Integrate the Google Contacts custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-gender-custom-data/" class="md-nav__link">
        Integrate the Gender custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-handlename-custom-data/" class="md-nav__link">
        Integrate the Handle Name custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-pokemon-custom-data/" class="md-nav__link">
        Integrate the Pokemon custom data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-rpg-custom-data/" class="md-nav__link">
        Integrate the RPG custom data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Groups
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Groups" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Groups
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/query-groups/" class="md-nav__link">
        Query groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/insert-groups/" class="md-nav__link">
        Insert groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/update-groups/" class="md-nav__link">
        Update groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/delete-groups/" class="md-nav__link">
        Delete groups
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Profile
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Profile" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Profile
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/query-profile/" class="md-nav__link">
        Query device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/insert-profile/" class="md-nav__link">
        Insert device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/update-profile/" class="md-nav__link">
        Update device owner Contact profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/delete-profile/" class="md-nav__link">
        Delete device owner Contact profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Accounts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Accounts" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Accounts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-accounts/" class="md-nav__link">
        Query for Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-raw-contacts/" class="md-nav__link">
        Query RawContacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/associate-device-local-raw-contacts-to-an-account/" class="md-nav__link">
        Associate a local RawContact to an Account
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Blocked numbers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Blocked numbers" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Blocked numbers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/about-blocked-numbers/" class="md-nav__link">
        About blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/query-blocked-numbers/" class="md-nav__link">
        Query blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/insert-blocked-numbers/" class="md-nav__link">
        Insert blocked numbers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/delete-blocked-numbers/" class="md-nav__link">
        Delete blocked numbers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Permissions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Permissions" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Permissions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../permissions/permissions-handling-coroutines/" class="md-nav__link">
        Permissions handling using coroutines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Asynchronous work
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Asynchronous work" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Asynchronous work
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../async/async-execution-coroutines/" class="md-nav__link">
        Execute work outside of the UI thread using coroutines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          UI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="UI" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          UI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/integrate-rudimentary-contacts-integrated-ui-components/" class="md-nav__link">
        Integrate rudimentary contacts ui components
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-remove-contact-raw-contact-photo/" class="md-nav__link">
        Get set remove full-sized and thumbnail contact photos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-contact-raw-contact-options/" class="md-nav__link">
        Get set Contact options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-default-data/" class="md-nav__link">
        Get set clear default Contact data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/link-unlink-contacts/" class="md-nav__link">
        Link unlink Contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/convenience-functions/" class="md-nav__link">
        Convenience functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          Logging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Logging" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Logging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logging/log-api-input-output/" class="md-nav__link">
        Log API input and output
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/test-contacts-api/" class="md-nav__link">
        Contacts API Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          Debug
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Debug" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Debug
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-contacts-provider-tables/" class="md-nav__link">
        Debug the Contacts Provider tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-blockednumber-provider-tables/" class="md-nav__link">
        Debug the BlockedNumber Provider tables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dev-notes/" class="md-nav__link">
        Developer notes
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#an-advanced-query" class="md-nav__link">
    An advanced query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-query" class="md-nav__link">
    A basic query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-blank-contacts" class="md-nav__link">
    Including blank contacts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-accounts" class="md-nav__link">
    Specifying Accounts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-only-specific-data" class="md-nav__link">
    Including only specific data
  </a>
  
    <nav class="md-nav" aria-label="Including only specific data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-groups" class="md-nav__link">
    Specifying Groups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limiting-and-offsetting" class="md-nav__link">
    Limiting and offsetting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executing-the-query" class="md-nav__link">
    Executing the query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-the-query" class="md-nav__link">
    Cancelling the query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-asynchronously" class="md-nav__link">
    Performing the query asynchronously
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-with-permission" class="md-nav__link">
    Performing the query with permission
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-data-support" class="md-nav__link">
    Custom data support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-where-function-to-specify-matching-criteria" class="md-nav__link">
    Using the where function to specify matching criteria
  </a>
  
    <nav class="md-nav" aria-label="Using the where function to specify matching criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    Performance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blank-contacts-and-the-where-function" class="md-nav__link">
    Blank Contacts and the where function
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/vestrel00/contacts-android/tree/main/docs/basics/query-contacts-advanced.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="query-contacts-advanced">Query contacts (advanced)<a class="headerlink" href="#query-contacts-advanced" title="Permanent link">&para;</a></h1>
<p>This library provides the <code>Query</code> API that allows you to get a list of Contacts matching a specific 
search criteria. All RawContacts of matching Contacts are included in the resulting Contact 
instances.</p>
<p>This provides a great deal of granularity and customizations when providing matching criteria via
the <code>where</code> function.</p>
<p>An instance of the <code>Query</code> API is obtained by,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">val</span> <span class="nv">query</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="na">query</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>For a broader, and more native Contacts app like query, use the <code>BroadQuery</code> API.
For more info, read <a href="../query-contacts/">Query contacts</a>.</p>
<p>If you want to query Data directly instead of Contacts, read <a href="../../data/query-data-sets/">Query specific data kinds</a>.</p>
<p>If you want to get the device owner Contact Profile, read <a href="../../profile/query-profile/">Query device owner Contact profile</a>.</p>
</blockquote>
<h2 id="an-advanced-query">An advanced query<a class="headerlink" href="#an-advanced-query" title="Permanent link">&para;</a></h2>
<p>To retrieve the first 5 contacts (including only the contact id, display name, and phone numbers in
the results) ordered by display name in descending order, matching ALL of these rules;</p>
<ul>
<li>a first name starting with "leo"</li>
<li>has emails from gmail or hotmail</li>
<li>lives in the US</li>
<li>has been born prior to making this query</li>
<li>is favorited (starred)</li>
<li>has a nickname of "DarEdEvil" (case sensitive)</li>
<li>works for Facebook</li>
<li>has a note</li>
<li>belongs to the account of "john.doe@gmail.com" or "john.doe@myspace.com"</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        <span class="p">(</span><span class="n">Name</span><span class="p">.</span><span class="na">GivenName</span> <span class="n">startsWith</span> <span class="s">&quot;leo&quot;</span><span class="p">)</span> <span class="n">and</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        <span class="p">(</span><span class="n">Email</span><span class="p">.</span><span class="na">Address</span> <span class="p">{</span> <span class="n">endsWith</span><span class="p">(</span><span class="s">&quot;gmail.com&quot;</span><span class="p">)</span> <span class="n">or</span> <span class="n">endsWith</span><span class="p">(</span><span class="s">&quot;hotmail.com&quot;</span><span class="p">)</span> <span class="p">})</span> <span class="n">and</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="p">(</span><span class="n">Address</span><span class="p">.</span><span class="na">Country</span> <span class="n">equalToIgnoreCase</span> <span class="s">&quot;us&quot;</span><span class="p">)</span> <span class="n">and</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="p">(</span><span class="n">Event</span> <span class="p">{</span> <span class="p">(</span><span class="n">Date</span> <span class="n">lessThan</span> <span class="n">Date</span><span class="p">().</span><span class="na">toWhereString</span><span class="p">())</span> <span class="n">and</span> <span class="p">(</span><span class="n">Type</span> <span class="n">equalTo</span> <span class="n">EventEntity</span><span class="p">.</span><span class="na">Type</span><span class="p">.</span><span class="na">BIRTHDAY</span><span class="p">)</span> <span class="p">})</span> <span class="n">and</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="p">(</span><span class="n">Contact</span><span class="p">.</span><span class="na">Options</span><span class="p">.</span><span class="na">Starred</span> <span class="n">equalTo</span> <span class="kc">true</span><span class="p">)</span> <span class="n">and</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        <span class="p">(</span><span class="n">Nickname</span><span class="p">.</span><span class="na">Name</span> <span class="n">equalTo</span> <span class="s">&quot;DarEdEvil&quot;</span><span class="p">)</span> <span class="n">and</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        <span class="p">(</span><span class="n">Organization</span><span class="p">.</span><span class="na">Company</span> <span class="n">`in`</span> <span class="n">listOf</span><span class="p">(</span><span class="s">&quot;facebook&quot;</span><span class="p">,</span> <span class="s">&quot;FB&quot;</span><span class="p">))</span> <span class="n">and</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="p">(</span><span class="n">Note</span><span class="p">.</span><span class="na">Note</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">())</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="p">}</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="p">.</span><span class="na">accounts</span><span class="p">(</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>        <span class="n">Account</span><span class="p">(</span><span class="s">&quot;john.doe@gmail.com&quot;</span><span class="p">,</span> <span class="s">&quot;com.google&quot;</span><span class="p">),</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="n">Account</span><span class="p">(</span><span class="s">&quot;john.doe@myspace.com&quot;</span><span class="p">,</span> <span class="s">&quot;com.myspace&quot;</span><span class="p">),</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="p">)</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="p">.</span><span class="na">include</span> <span class="p">{</span> <span class="n">setOf</span><span class="p">(</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="n">Contact</span><span class="p">.</span><span class="na">Id</span><span class="p">,</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        <span class="n">Contact</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">,</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        <span class="n">Phone</span><span class="p">.</span><span class="na">Number</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="p">)</span> <span class="p">}</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="p">.</span><span class="na">orderBy</span><span class="p">(</span><span class="n">ContactsFields</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">.</span><span class="na">desc</span><span class="p">())</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="p">.</span><span class="na">offset</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    <span class="p">.</span><span class="na">limit</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<h2 id="a-basic-query">A basic query<a class="headerlink" href="#a-basic-query" title="Permanent link">&para;</a></h2>
<p>This query API may also be used to make basic, simpler queries.</p>
<p>To get all contacts ordered by the primary display name,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="p">.</span><span class="na">orderBy</span><span class="p">(</span><span class="n">ContactsFields</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">.</span><span class="na">asc</span><span class="p">())</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<p>To get all contacts with a phone number AND email,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="p">...</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="p">.</span><span class="na">where</span><span class="p">{</span> <span class="n">Phone</span><span class="p">.</span><span class="na">Number</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">()</span> <span class="n">and</span> <span class="n">Email</span><span class="p">.</span><span class="na">Address</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>Note that phone numbers are a special case because the Contacts Provider keeps track of the 
existence of a phone number for any given contact. Use <code>Contact.HasPhoneNumber equalTo true</code>
instead for a more optimized query.</p>
</blockquote>
<p>To get a list of contacts with the given IDs,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="p">...</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Contact</span><span class="p">.</span><span class="na">Id</span> <span class="n">`in`</span> <span class="n">contactIds</span> <span class="p">}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<p>To get a Contact by lookup key, read about <a href="../../entities/about-contact-lookup-key/">Contact lookup key vs ID</a>.</p>
<h2 id="including-blank-contacts">Including blank contacts<a class="headerlink" href="#including-blank-contacts" title="Permanent link">&para;</a></h2>
<p>The API allows you to specify if you want to include blank contacts or not,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">.</span><span class="na">includeBlanks</span><span class="p">(</span><span class="kc">true</span><span class="o">|</span><span class="kc">false</span><span class="p">)</span>
</code></pre></div>
<p>For more info, read <a href="../../entities/about-blank-contacts/">Blank contacts</a>.</p>
<h2 id="specifying-accounts">Specifying Accounts<a class="headerlink" href="#specifying-accounts" title="Permanent link">&para;</a></h2>
<p>To limit the search to only those contacts associated with one of the given accounts,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">.</span><span class="na">accounts</span><span class="p">(</span><span class="n">accounts</span><span class="p">)</span>
</code></pre></div>
<p>For example, to limit the search to contacts belonging to only one account,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">.</span><span class="na">accounts</span><span class="p">(</span><span class="n">Account</span><span class="p">(</span><span class="s">&quot;john.doe@gmail.com&quot;</span><span class="p">,</span> <span class="s">&quot;com.google&quot;</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>For more info, read <a href="../../accounts/query-accounts/">Query for Accounts</a>.</p>
</blockquote>
<p>The Contacts returned may still contain RawContacts / data that belongs to other accounts not
specified in the given accounts because Contacts may be made up of more than one RawContact from
different Accounts. This is the same behavior as the native Contacts app.</p>
<p>If no accounts are specified (this function is not called or called with no Accounts), then all
RawContacts of Contacts are included in the search.</p>
<p>A null Account may be provided here, which results in RawContacts with no associated Account to be
included in the search. RawContacts without an associated account are considered local contacts or
device-only contacts, which are not synced.</p>
<p>For more info, read about <a href="../../entities/about-local-contacts/">Local (device-only) contacts</a>.</p>
<blockquote>
<p>Note that this may affect performance. This may require one or more additional queries, internally
performed in this function, which increases the time required for the search. Therefore, you
should only specify this if you actually need it.</p>
</blockquote>
<h2 id="including-only-specific-data">Including only specific data<a class="headerlink" href="#including-only-specific-data" title="Permanent link">&para;</a></h2>
<p>To include only the given set of fields (data) in each of the matching contacts,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">.</span><span class="na">include</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</code></pre></div>
<p>For example, to only include email and name fields,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">.</span><span class="na">include</span> <span class="p">{</span> <span class="n">Email</span><span class="p">.</span><span class="na">all</span> <span class="o">+</span> <span class="n">Name</span><span class="p">.</span><span class="na">all</span> <span class="p">}</span>
</code></pre></div>
<p>For more info, read <a href="../../entities/include-only-desired-data/">Include only certain fields for read and write operations</a>.</p>
<h3 id="specifying-groups">Specifying Groups<a class="headerlink" href="#specifying-groups" title="Permanent link">&para;</a></h3>
<p>To limit the search to only those RawContacts associated with at least one of the given groups,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">GroupMembership</span><span class="p">.</span><span class="na">GroupId</span> <span class="n">`in`</span> <span class="n">groups</span><span class="p">.</span><span class="na">mapNotNull</span> <span class="p">{</span> <span class="nb">it</span><span class="p">.</span><span class="na">id</span> <span class="p">}</span> <span class="p">}</span>
</code></pre></div>
<blockquote>
<p>For more info, read <a href="../../groups/query-groups/">Query groups</a>.</p>
</blockquote>
<p>Contacts returned may still contain RawContacts / data that belongs to other groups not specified in
the given groups because Contacts may be made up of more than one RawContact from different Groups.
This is the same behavior as the native Contacts app.</p>
<p>If no groups are specified, then all RawContacts of Contacts are included in the search.</p>
<blockquote>
<p>Note that this may affect performance. This may require one or more additional queries, internally
performed in this function, which increases the time required for the search. Therefore, you
should only specify this if you actually need it.</p>
</blockquote>
<h2 id="ordering">Ordering<a class="headerlink" href="#ordering" title="Permanent link">&para;</a></h2>
<p>To order resulting Contacts using one or more fields,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">.</span><span class="na">orderBy</span><span class="p">(</span><span class="n">fieldOrder</span><span class="p">)</span>
</code></pre></div>
<p>For example, to order contacts by favorite/starred status such that favorite/starred contacts
appear first in the list AND order by display name primary in ascending order (from a to z ignoring
case),</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">.</span><span class="na">orderBy</span><span class="p">(</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="n">ContactsFields</span><span class="p">.</span><span class="na">Options</span><span class="p">.</span><span class="na">Starred</span><span class="p">.</span><span class="na">desc</span><span class="p">(),</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    <span class="n">ContactsFields</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">.</span><span class="na">asc</span><span class="p">()</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="p">)</span>
</code></pre></div>
<p>String comparisons ignores case by default. Each orderBys provides <code>ignoreCase</code> as an optional
parameter.</p>
<p>Use <code>ContactsFields</code> to construct the orderBys.</p>
<blockquote>
<p>If you need to sort a collection of Contacts outside of a database query using any field (in
addition to <code>ContactsFields</code>), use <code>contacts.core.util.ContactsComparator</code>.
For more info, read <a href="../../other/convenience-functions/">Convenience functions</a>.</p>
</blockquote>
<h2 id="limiting-and-offsetting">Limiting and offsetting<a class="headerlink" href="#limiting-and-offsetting" title="Permanent link">&para;</a></h2>
<p>To limit the amount of contacts returned and/or offset (skip) a specified number of contacts,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">.</span><span class="na">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">.</span><span class="na">offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
</code></pre></div>
<p>For example, to only get a maximum 20 contacts, skipping the first 20,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">.</span><span class="na">limit</span><span class="p">(</span><span class="m">20</span><span class="p">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="p">.</span><span class="na">offset</span><span class="p">(</span><span class="m">20</span><span class="p">)</span>
</code></pre></div>
<p>This is useful for pagination =)</p>
<blockquote>
<p>Note that it is recommended to limit the number of contacts when querying to increase performance
and decrease memory cost.</p>
</blockquote>
<h2 id="executing-the-query">Executing the query<a class="headerlink" href="#executing-the-query" title="Permanent link">&para;</a></h2>
<p>To execute the query,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<h2 id="cancelling-the-query">Cancelling the query<a class="headerlink" href="#cancelling-the-query" title="Permanent link">&para;</a></h2>
<p>To cancel a query amid execution,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">.</span><span class="na">find</span> <span class="p">{</span> <span class="n">returnTrueIfQueryShouldBeCancelled</span><span class="p">()</span> <span class="p">}</span>
</code></pre></div>
<p>The <code>find</code> function optionally takes in a function that, if it returns true, will cancel query
processing as soon as possible. The function is called numerous times during query processing to
check if processing should stop or continue. This gives you the option to cancel the query.</p>
<p>This is useful when used in multi-threaded environments. One scenario where this would be frequently
used is when performing queries as the user types a search text. You are able to cancel the current
query when the user enters new text.</p>
<p>For example, to automatically cancel the query inside a Kotlin coroutine when the coroutine is cancelled,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">launch</span> <span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    <span class="n">withContext</span><span class="p">(</span><span class="n">coroutineContext</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>        <span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="na">find</span> <span class="p">{</span> <span class="o">!</span><span class="n">isActive</span> <span class="p">}</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="p">}</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">}</span>
</code></pre></div>
<h2 id="performing-the-query-asynchronously">Performing the query asynchronously<a class="headerlink" href="#performing-the-query-asynchronously" title="Permanent link">&para;</a></h2>
<p>Queries are executed when the <code>find</code> function is invoked. The work is done in the same thread as
the call-site. This may result in a choppy UI.</p>
<p>To perform the work in a different thread, use the Kotlin coroutine extensions provided in the <code>async</code> module.
For more info, read <a href="../../async/async-execution-coroutines/">Execute work outside of the UI thread using coroutines</a>.</p>
<p>You may, of course, use other multi-threading libraries or just do it yourself =)</p>
<blockquote>
<p>Extensions for Kotlin Flow and RxJava are also in the v1 roadmap, which includes APIs for
listening to Contacts database changes.</p>
</blockquote>
<h2 id="performing-the-query-with-permission">Performing the query with permission<a class="headerlink" href="#performing-the-query-with-permission" title="Permanent link">&para;</a></h2>
<p>Queries require the <code>android.permission.READ_CONTACTS</code> permission. If not granted, the query will 
do nothing and return an empty list.</p>
<p>To perform the query with permission, use the extensions provided in the <code>permissions</code> module.
For more info, read <a href="../../permissions/permissions-handling-coroutines/">Permissions handling using coroutines</a>.</p>
<p>You may, of course, use other permission handling libraries or just do it yourself =)</p>
<h2 id="custom-data-support">Custom data support<a class="headerlink" href="#custom-data-support" title="Permanent link">&para;</a></h2>
<p>The <code>Query</code> API supports custom data. For more info, read <a href="../../customdata/query-custom-data/">Query custom data</a>.</p>
<h2 id="using-the-where-function-to-specify-matching-criteria">Using the <code>where</code> function to specify matching criteria<a class="headerlink" href="#using-the-where-function-to-specify-matching-criteria" title="Permanent link">&para;</a></h2>
<p>Use the <code>contacts.core.Fields</code> combined with the extensions from <code>contacts.core.Where</code> to form WHERE
clauses. </p>
<blockquote>
<p>This docs page will not provide a tutorial on database where clauses. It assumes that you know the basics. 
If you don't know the basics, then search for <a href="https://www.google.com/search?q=sqlite+where+clause">sqlite where clause</a>. </p>
</blockquote>
<p>For example, to get all contacts with a phone number AND email,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    <span class="p">...</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Phone</span><span class="p">.</span><span class="na">Number</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">()</span> <span class="n">and</span> <span class="n">Email</span><span class="p">.</span><span class="na">Address</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<p>To get a list of contacts with the given IDs,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kd">val</span> <span class="nv">contacts</span> <span class="o">=</span> <span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="p">.</span><span class="na">query</span><span class="p">()</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>    <span class="p">...</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Contact</span><span class="p">.</span><span class="na">Id</span> <span class="n">`in`</span> <span class="n">contactIds</span> <span class="p">}</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<h3 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h3>
<p>Using <code>where</code> may require one or more additional queries, internally performed by the API, which
increases the time it takes for the query to complete. Therefore, you should only use <code>where</code> if 
you actually need it.</p>
<p>For every usage of the <code>and</code> operator where the left-hand-side and right-hand-side are different 
data kinds, an internal database query is performed. This is due to the way the Data table is 
structured in relation to Contacts. For example,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">Email</span><span class="p">.</span><span class="na">Address</span><span class="p">.</span><span class="na">isNotNull</span><span class="p">()</span> <span class="n">and</span> <span class="n">Phone</span><span class="p">.</span><span class="na">Number</span><span class="p">.</span><span class="na">isNotNull</span><span class="p">()</span> <span class="n">and</span> <span class="n">Address</span><span class="p">.</span><span class="na">FormattedAddress</span><span class="p">.</span><span class="na">isNotNull</span><span class="p">()</span>
</code></pre></div>
<p>The above will require two additional internal database queries in order to simplify the query such 
that it can actually provide matching Contacts.</p>
<p>Using the <code>or</code> operator does not have this performance hit.</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<p>This library only provides basic WHERE functions. It does not cover the entirety of SQLite, though 
the community may add more over time &lt;3</p>
<p>Furthermore, this library is constrained by rules and limitations set by the Contacts Provider and
the behavior of the native Contacts app. One such rule/limitation has resulted in this library not
providing WHERE functions such as <code>isNull</code> or <code>isNullOrEmpty</code> to prevent making misleading queries.</p>
<p>Removing a piece of existing data results in the deletion of the row in the Data table if that row 
no longer contains any meaningful data. This is the behavior of the native Contacts app. Therefore, 
querying for null fields is not possible. For example, there may be no Data rows that exist where 
the email address is null. Thus, a query to search for all contacts with no email addresses may 
return 0 contacts even if there are some contacts that do not have at least one email address.</p>
<p>If you want to match contacts that has no particular type of data, you will have to make two 
queries. One to get contacts that have that particular type of data and another to get contacts
that were not part of the first query results. For example,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">val</span> <span class="nv">contactsWithEmails</span> <span class="o">=</span> <span class="n">query</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    <span class="p">.</span><span class="na">include</span><span class="p">(</span><span class="n">Fields</span><span class="p">.</span><span class="na">Contact</span><span class="p">.</span><span class="na">Id</span><span class="p">)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Email</span><span class="p">.</span><span class="na">Address</span><span class="p">.</span><span class="na">isNotNullOrEmpty</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="kd">val</span> <span class="nv">contactIdsWithEmails</span> <span class="o">=</span> <span class="n">contactsWithEmails</span><span class="p">.</span><span class="na">mapNotNull</span> <span class="p">{</span> <span class="nb">it</span><span class="p">.</span><span class="na">id</span> <span class="p">}</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="kd">val</span> <span class="nv">contactsWithoutEmails</span> <span class="o">=</span> <span class="n">query</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Contact</span><span class="p">.</span><span class="na">Id</span> <span class="n">notIn</span> <span class="n">contactIdsWithEmails</span> <span class="p">}</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<p>There is a special case with phone numbers. The ContactsContract provides a field that is true if
the contact has at least one phone number; <code>Fields.Contact.HasPhoneNumber</code>. The phone number is the 
only kind of data that the ContactsContract provides with an indexed value such as this. The 
ContactsContract does NOT provide things like "hasEmail", "hasWebsite", etc. Regardless, this 
library provide functions to match contacts that "has at least one instance of a kind of data". 
The <code>HasPhoneNumber</code> field is not necessary to get contacts that have a phone number. However, this 
does provide an easy way to get contacts that have no phone numbers without having to make two 
queries. For example,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">val</span> <span class="nv">contactsWithNoPhoneNumbers</span> <span class="o">=</span> <span class="n">query</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="p">.</span><span class="na">where</span> <span class="p">{</span> <span class="n">Contact</span><span class="p">.</span><span class="na">HasPhoneNumber</span> <span class="n">notEqualTo</span> <span class="kc">true</span> <span class="p">}</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>    <span class="p">.</span><span class="na">find</span><span class="p">()</span>
</code></pre></div>
<h3 id="blank-contacts-and-the-where-function">Blank Contacts and the <code>where</code> function<a class="headerlink" href="#blank-contacts-and-the-where-function" title="Permanent link">&para;</a></h3>
<p>The <code>where</code> function is only used to query the Data table. Some contacts do not have any Data table 
rows. However, this library exposes some fields that belong to other tables, accessible via the 
Data table with joins;</p>
<ul>
<li><code>Fields.Contact</code></li>
<li><code>Fields.RawContact</code></li>
</ul>
<p>Using these fields in the where clause does not have any effect in matching blank Contacts or 
blank RawContacts simply because they have no Data rows containing these joined fields.</p>
<p>For more info, read about <a href="../../entities/about-blank-contacts/">Blank contacts</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../query-contacts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Query contacts" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Query contacts
            </div>
          </div>
        </a>
      
      
        
        <a href="../insert-contacts/" class="md-footer__link md-footer__link--next" aria-label="Next: Insert contacts" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Insert contacts
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.5413a266.min.js"></script>
      
    
  </body>
</html>